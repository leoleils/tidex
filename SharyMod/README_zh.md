# 星露谷物语Shary NPC模组

## 描述
这个模组为星露谷物语添加了一个名为Shary（雪莉）的25岁图书管理员NPC。她出现在小镇上，在图书馆工作，并且全天都有丰富的活动安排。玩家可以与她建立友谊、约会、参加节日活动，甚至与她结婚。

## 功能特点
- 基于友谊等级的独特对话系统
- 完整的日程安排，包括在图书馆工作、在镇上散步和回家
- 针对不同季节、天气条件和星期的特殊对话
- 与节日和特殊事件的集成
- 可结婚并拥有自定义配偶房间
- 基于友谊等级的资源收集功能
- 使用qwen3-235b-a22b-instruct-2507模型的Qwen AI对话集成
- 对话上下文记忆系统
- 多轮对话支持
- 按游戏日期组织的交互日志
- 流式输出实现自然对话体验

## 安装方法
1. 安装最新版本的 [SMAPI](https://smapi.io/)
2. 安装 [Content Patcher](https://www.nexusmods.com/stardewvalley/mods/1915)
3. 下载此模组并解压到 StardewValley/Mods 目录
4. 使用 SMAPI 运行游戏

## 角色详情
- **姓名**: Shary (雪莉)
- **年龄**: 25岁
- **职业**: 图书管理员
- **位置**: 小镇
- **日程安排**:
  - 上午 (8点-12点): 在图书馆工作
  - 下午 (1点-5点): 在镇上散步
  - 晚上 (7点-10点): 在家中
  - 夜晚 (10点-12点): 睡觉

## 友谊进度
通过送礼、对话和共度时光来增进与Shary的友谊，你将解锁：
- 不同友谊等级的特殊对话
- 约会机会
- 节日舞会邀请
- 资源收集帮助

## 资源收集
当与Shary的友谊达到一定等级后，你可以请求她帮助收集农场资源。她会收集物品并送回你的家中。

## Qwen集成
Shary使用Qwen模型(qwen3-235b-a22b-instruct-2507)通过DashScope的OpenAI兼容API进行动态对话。集成功能包括：
- 基于对话历史和友谊等级的上下文感知响应
- 流式输出实现自然对话体验
- 可完全配置的提示词来自定义个性
- 多轮对话支持

使用此功能：
1. 从[DashScope](https://dashscope.aliyun.com/)获取API密钥
2. 为您的账户启用qwen3-235b-a22b-instruct-2507模型
3. 在SharySMAPI模组文件夹的config.json文件中添加您的API密钥

## 交互日志
与Shary的所有交互都会自动记录时间戳和游戏上下文。日志按游戏日期组织（例如"s01"表示春季第一天），包括：
- 对话交换
- 位置访问
- 定时事件
- 资源收集请求
- 会话开始/结束事件

使用SMAPI控制台命令`shary_logs`查看交互日志：
- `shary_logs` - 查看当前游戏日期的日志
- `shary_logs s01` - 查看特定日期的日志（此例为春季第一天）
- `shary_logs all` - 查看所有日期的日志

## 故障排除
如果遇到任何问题：
1. 确保您安装了最新版本的SMAPI和Content Patcher
2. 检查所有文件是否在正确位置
3. 验证配置设置
4. 检查SMAPI日志中的错误信息
5. 在模组的Nexus页面报告任何bug

## 致谢
- 创建者: YourName
- 灵感来源于星露谷物语的美好世界
- 使用官方OpenAI C# SDK实现Qwen集成